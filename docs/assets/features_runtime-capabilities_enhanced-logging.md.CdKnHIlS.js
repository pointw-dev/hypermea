import{_ as a,C as i,c as l,o,j as n,al as p,a as t,G as c}from"./chunks/framework.CEo5TfsR.js";const E=JSON.parse('{"title":"Enhanced Logging","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://pointw-dev.github.io/hypermea/features/runtime-capabilities/enhanced-logging.html"}]]},"headers":[],"relativePath":"features/runtime-capabilities/enhanced-logging.md","filePath":"features/runtime-capabilities/enhanced-logging.md"}'),r={name:"features/runtime-capabilities/enhanced-logging.md"},d={class:"warning custom-block"};function g(u,e,h,_,v,O){const s=i("centered-image");return o(),l("div",null,[e[2]||(e[2]=n("h1",{id:"enhanced-logging",tabindex:"-1"},[t("Enhanced Logging "),n("a",{class:"header-anchor",href:"#enhanced-logging","aria-label":'Permalink to "Enhanced Logging"'},"â€‹")],-1)),n("div",d,[e[0]||(e[0]=n("p",{class:"custom-block-title"},"Work in progress",-1)),c(s,{src:"/img/work-in-progress.png"}),e[1]||(e[1]=n("p",null,"This warning will be removed once this page has passed testing.",-1))]),e[3]||(e[3]=p(`<ul><li><code>TRACE</code> level <ul><li>use as you wish (<code>LOG.trace(&#39;very verbose message here&#39;)</code>)</li><li>Use <code>@trace</code> decorator to automatically log a function&#39;s enter and exit (even if exception is thrown)</li><li>Disable with <code>HY_TRACE_LOGGING</code> to avoid stepping into the detailed logger when debugging (disabled by default in your <code>_env.conf</code>)</li></ul></li><li>Environment / settings at the beginning of each run</li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - my-api version           1.0.3</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - hypermea-core version    0.9.50</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - eve version              2.2.0</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - cerberus version         1.3.7</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - python version           3.12.3 (main, May 17 2024, 12:24:17) [GCC 13.2.0]</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - os_system version        Linux</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - os_release version       6.11.0-21-generic</span></span>
<span class="line"><span>2025-04-03 20:26:41,733 - configuration - INFO - os_version version       #21~24.04.1-Ubuntu SMP PREEMPT_DYNAMIC Mon Feb 24 16:52:15 UTC 2</span></span>
<span class="line"><span>2025-04-03 20:26:41,734 - configuration - INFO - os_platform version      Linux-6.11.0-21-generic-x86_64-with-glibc2.39</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - -----------------------------</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - ****** STARTING my-api ******</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - -----------------------------</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - == HY: HypermeaService base configuration</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_ADD_ECHO: Disabled</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_API_NAME: dev-hypermea-api</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_API_PORT: 2112</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_CACHE_CONTROL: no-cache, no-store, must-revalidate</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_CACHE_EXPIRES: 30</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_INSTANCE_NAME: opus</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_LOG_MAX_BODY_SIZE: 1024</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_LOG_TO_FOLDER: Disabled</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - MONGO_ATLAS: Disabled</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - MONGO_DBNAME: dev-hypermea-api</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - MONGO_HOST: localhost</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - MONGO_PORT: 27017</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_PAGINATION_DEFAULT: 1000</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_PAGINATION_LIMIT: 3000</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_LOG_TO_EMAIL: Disabled</span></span>
<span class="line"><span>2025-04-03 20:26:41,818 - service - INFO - HY_TRACE_LOGGING: Disabled</span></span></code></pre></div><ul><li><p>Enable <code>HY_LOG_TO_FOLDER</code> and logs are created in <code>/var/logs/service-name</code> (which the dev <code>docker-compose.yml</code> maps to local volume so you can view the logs even if the container is stopped)</p></li><li><p>You can be notified by email if the server sends a 5xx response</p><ul><li>Enable <code>HY_LOG_TO_EMAIL</code></li><li>then configure <code>SMTP_PORT</code>, <code>SMTP_HOST</code>, <code>HY_ERROR_EMAIL_RECIPIENTS</code>, and <code>HY_ERROR_EMAIL_FROM</code></li></ul></li><li><p>View and change the logging verbosity at runtime with a GET and/or PUT to <code>/_logging</code> (provide details)</p></li><li><p>Easily extend the logging capabilities using the standard Python <code>logging</code> modules</p><ul><li>Publish to Slack on 5xx, or whatever circumstance you wish (the 500th GET to a particular resource? - only limit is your imagination)</li><li>See and modify <code>utils/log_setup.py</code></li></ul></li><li><p>request and response details when DEBUG is set</p><ul><li>[Body truncated. Set logging to TRACE for full body, or increase HY_LOG_MAX_BODY_SIZE.]</li><li>Collection has 5 items</li></ul></li><li><p>change logging verbosity at run-time:</p><ul><li>From the root document, follow the <code>logging</code> link relation and <ul><li>GET to see the current logging verbosity,</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;console&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEBUG&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>change it then PUT it back</li></ul></li></ul></li></ul>`,3))])}const N=a(r,[["render",g]]);export{E as __pageData,N as default};
