import{_ as a,C as l,c as n,o as t,j as i,al as p,a as o,G as r}from"./chunks/framework.CEo5TfsR.js";const f=JSON.parse('{"title":"Miscellaneous scaffolding features","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://pointw-dev.github.io/hypermea/features/scaffolding-tools/misc.html"}]]},"headers":[],"relativePath":"features/scaffolding-tools/misc.md","filePath":"features/scaffolding-tools/misc.md"}'),d={name:"features/scaffolding-tools/misc.md"},h={class:"warning custom-block"};function c(k,s,u,g,E,y){const e=l("centered-image");return t(),n("div",null,[s[2]||(s[2]=i("h1",{id:"miscellaneous-scaffolding-features",tabindex:"-1"},[o("Miscellaneous scaffolding features "),i("a",{class:"header-anchor",href:"#miscellaneous-scaffolding-features","aria-label":'Permalink to "Miscellaneous scaffolding features"'},"â€‹")],-1)),i("div",h,[s[0]||(s[0]=i("p",{class:"custom-block-title"},"Work in progress",-1)),r(e,{src:"/img/work-in-progress.png"}),s[1]||(s[1]=i("p",null,"This warning will be removed once this page has passed testing.",-1))]),s[3]||(s[3]=p(`<ul><li><p>WARNING when combining query string parameters with curl, surround URL in quotes (else &amp; is parsed by bash)</p></li><li><p>Settings/configuration system</p><ul><li><p>The <code>HypermeaService</code> ships with a sophisticated settings/configuration management system based on these principles:</p><ul><li>Easy to run: An API should run right out of the box without requiring configuration</li><li>Container compatible: All settings can be set with environment variables.</li><li>Developer convenience: Developers can easily modify settings without accidentally commiting code with experimental values. <ul><li>use <code>_env.conf</code> to set these values - included when your API was created</li><li>This file is in <code>.gitignore</code> and <code>.dockerignore</code> so it will never accidentally be shipped anywhere but your dev environment</li></ul></li></ul></li><li><p>Visible: all setting values are logged at startup and can be viewed with <code>GET /_settings</code> - no more wondering what value was set when debugging a problem at 3:00 AM</p></li><li><p>yte - Yes, True, Enabled (case insensitive)</p></li><li><p>(TODO: cancellable, optional, prefix stuff?, <code>settings.has_enabled()</code> [0] == &#39;YyTtEe&#39;)</p></li></ul></li><li><p>test suite (BDD/pytest-bdd)</p><ul><li>separate hypermea folder from your application folder</li><li>test_debug_display_environment</li><li>allure</li><li>requires mongo, but runs independently <ul><li>i.e. separate MongoDB db, separate Redis db</li><li>can run tests even if service is also running</li></ul></li></ul></li></ul><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[pytest]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">addopts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = -v -m </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;not skip&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">testpaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = __tests__</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bdd_features_base_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ../features</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">markers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    slow: this feature/scenario runs slowly (deselect with </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-m &quot;not slow&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    skip: skip this feature/scenario</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    wip: this feature/scenario is under development (deselect with </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-m &quot;not wip&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    only: if you want to run only these tests select with </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-m only&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">filterwarnings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ignore::pytest.PytestDeprecationWarning</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ignore::DeprecationWarning</span></span></code></pre></div><ul><li><p>HAL media type</p><ul><li>Eve&#39;s out-of-box JSON structure is very close to HAL. With hypermea, you get even closer <ul><li>Content-type is <code>application/hal+json</code></li><li><code>_links</code> are tidied up, some superfluous metadata is removed</li><li>hierarchical navigation follows IANA conventions</li><li>(this is constantly improving - coming soon curies, _embedded, as well as other standard hypermedia types like Siren, Atom, Collection+JSON, etc.)</li><li><a href="https://dev.to/nevnet99/wtf-is-hal-hypertext-application-language-2fo6" target="_blank" rel="noreferrer">https://dev.to/nevnet99/wtf-is-hal-hypertext-application-language-2fo6</a></li></ul></li></ul></li><li><p>X-Total-Count (useful with HEAD request, <code>curl -I --head localhost:2112</code>)</p></li><li><p>links-only</p></li><li><p>_query_options</p></li><li><p>Exception Handling</p><ul><li>improves on Eve&#39;s out-of-box behaviour by standardizing the error response - even in the case of 5xx&#39;s <code>{_status: &quot;ERR&quot;, _error: {code:422, message: &quot;&quot;}, _issues: [] }</code></li><li>your code can call <code>utils.make_error_response()</code> to emit custom error messages that follow this standard.</li></ul></li><li><p>enforced pluralization</p><ul><li>collections are pluralized</li><li>items are singularized</li></ul></li><li><p>CORS permissively set by default</p></li><li><p>create_form / edit_form (RFC 6861)</p></li><li><p>common fields</p></li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COMMON_FIELDS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;_owner&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;_tags&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;list&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;schema&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;_x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;allow_unknown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><p><code>utils.get_db()</code> to quickly access the mongodb collections</p></li><li><p><code>utils.get_api()</code> to make http requests in your code to the API itself</p></li><li><p>hypermea errorlevels / exit codes: 1 - not run in API folder structure 2 - an API already exists in this folder 3 - user cancelled when folder is not empty 11 - --set-version value not specified correctly</p><p>10x - git 101 - git already added</p><p>20x - auth 201 - auth already added</p><p>30x - validation 301 - validation already installed</p><p>40x - docker 401 - docker already installed</p><p>50x - websocket 501 - websocket already installed</p><p>60x - serverless 601 - serverless already added 602 - node not installed 603 - serverless not installed 604 - node not initialized 605 - serverless plugin not installed 666 - serverless installation canceled by user</p><p>70x - resource 701 - resource name invalid 702 - resource already exists 703 - resource does not exist 704 - could not delete resource files</p><p>80x - link 801 - link already exists 802 - local resource does not exist 803 - both parent and child of a link cannot be remote (at least one must be local) 804 - link does not exist</p></li><li><p>805 - invalid link (parent and or child must be a resource, or marked external)</p><p>90x - integration 901 - integration already exists 902 - name required when choosing custom integration</p></li></ul><p>100x - affordances 1001 - affordance already exists 1002 - affordance does not exist 1003 - cannot attach affordance to a resource that does not exist 1004 - affordance already attached</p><ul><li><p>organized folder structure</p><ul><li><p>designed with more than simple api in mind (e.g. scripts)</p></li><li><p>src, doc, etc</p></li><li><p>FAQ why my-api/src/my-api ?</p></li><li><p>domain decomposition</p></li><li><p>hooks</p></li><li><p>integrations</p></li><li><p>affordances</p></li><li><p>(addins: validation, authorization, etc...)</p></li></ul></li><li><p>common.py</p><p>_x name description</p></li></ul>`,7))])}const v=a(d,[["render",c]]);export{f as __pageData,v as default};
